# Web Novel Downloader

## 概要

Web小説をダウンロードしてEPUB形式に変換するローカルアプリケーションです。
現在は以下のサイトに対応しています：

- カクヨム (kakuyomu.jp)

## 特徴

- Web小説を見やすいEPUB形式でダウンロード
- グループ（短編集や連載）対応
- タイトル、作者情報の自動取得
- 章タイトルのグループ表示切替機能
- ローカルキャッシュによる高速な再ダウンロード
- 縦書き最適化テキスト処理
  - 英数字の横書き処理
  - 記号類の最適化
  - 引用符の変換
  - その他、日本語組版のための各種調整

## インストールと起動方法

### 必要な環境

- Node.js (v18以上)
- npm (v8以上)

### セットアップ手順

1. リポジトリのクローン:
```bash
git clone https://github.com/[your-username]/kakuyomu-downloader.git
cd kakuyomu-downloader
```

2. 依存パッケージのインストール:
```bash
npm install
```

3. アプリケーションの起動:
```bash
npm start
```

アプリケーションは http://localhost:5173 で起動します。

## 使用方法

1. カクヨムの作品ページURLを入力欄に貼り付け
2. 「取得」ボタンをクリック
3. ダウンロードしたい話を選択（全選択も可能）
4. 必要に応じてグループ表示の切り替え
5. 「EPUBをダウンロード」ボタンをクリック

### 補足

- グループ表示切替: 短編集などの章タイトルを「グループ名 - タイトル」の形式で表示するかを選択できます
- キャッシュ機能: 一度ダウンロードした作品は高速に再ダウンロードが可能です
- キャッシュの削除: 作品の再取得が必要な場合は「キャッシュクリア」ボタンで削除できます

## 技術仕様

### 使用技術

- フロントエンド
  - React
  - TypeScript
  - Tailwind CSS
  - shadcn/ui

- バックエンド
  - Express
  - Node.js

### 主要機能

- サイト別アダプターによる拡張性の確保
- IndexedDBを使用したローカルキャッシュ
- カスタマイズ可能なテキスト処理エンジン
- EPUBファイルの自動生成

## 制限事項

- ローカル使用専用のアプリケーションです
- 個人使用目的でのみ使用してください
- ダウンロードした作品の再配布は禁止です
- カクヨム以外のサイトには現在対応していません

## 開発者向け情報

### アダプターの追加方法

新しいサイトへの対応は以下の手順で可能です：

1. `src/adapters/[site-name]` ディレクトリの作成
2. 必要なファイルの実装:
   - `adapter.ts`: サイト固有のアダプター実装
   - `parser.ts`: HTMLパース処理の実装
   - `validator.ts`: URL検証ロジックの実装
3. `src/adapters/factory.ts` でのアダプター登録

詳細は各アダプターのソースコードを参照してください。

### プロジェクト構造

```
.
├── server/             # Express サーバー
├── src/
│   ├── adapters/      # サイト別アダプター
│   ├── components/    # React コンポーネント
│   ├── hooks/         # カスタムフック
│   ├── lib/          # ユーティリティ
│   │   ├── epub/     # EPUB生成
│   │   └── text-processing/  # テキスト処理
│   └── types/        # 型定義
```

## ライセンス

MIT License

## 注意事項

- 利用規約に従って適切に使用してください
- サーバーに過剰な負荷をかけないよう、適切な間隔でダウンロードを行ってください
- ダウンロードしたコンテンツの取り扱いには十分注意してください

## 謝辞

このプロジェクトは以下のオープンソースソフトウェアを使用しています：

- React
- TypeScript
- Tailwind CSS
- shadcn/ui
- その他、package.jsonに記載のライブラリ
